CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT("rpg2kLib" CXX)

# set warning flags
IF((${CMAKE_CXX_COMPILER_ID} MATCHES "GNU") OR (${CMAKE_CXX_COMPILER_ID} MATCHES "Clang"))
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall -Werror")
ENDIF()

# DEBUG define
IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
	ADD_DEFINITIONS(-DRPG2K_DEBUG=1)
ELSE()
	ADD_DEFINITIONS(-DRPG2K_DEBUG=0)
ENDIF()

# Boost
FIND_PACKAGE(Boost REQUIRED)
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})

# EASTL things
ADD_SUBDIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/EASTL)
INCLUDE(${CMAKE_CURRENT_SOURCE_DIR}/EASTL/EASTL.cmake)
FIND_EASTL(${CMAKE_CURRENT_SOURCE_DIR}/EASTL)

# rpg2kLib code
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/rpg2k SRCS)
AUX_SOURCE_DIRECTORY(${CMAKE_CURRENT_SOURCE_DIR}/rpg2k/define SRCS)
ADD_LIBRARY(${PROJECT_NAME} STATIC ${SRCS})
TARGET_LINK_LIBRARIES(${PROJECT_NAME}
	${Boost_LIBRARIES}
	${EASTL_LIBRARIES}
)

ADD_DEPENDENCIES(${PROJECT_NAME} "EASTL")
